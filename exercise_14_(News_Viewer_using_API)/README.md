## Exercise 14

외부 API와 연동하여 뉴스 뷰어 만들기

### 외부 API와 연동하여 뉴스 뷰어 만들기

* https://newsapi.org/ 에서 제공하는 API를 사용하여 데이터를 받아, styled-components로 스타일링
* 시간이 걸리는 작업 - 서버 쪽 데이터 필요 → Ajax기법으로 서버의 API호출 → 데이터 수신
  * 네트워크 송수신 과정에서 시간이 걸림 → 응답을 받을 때까지 기다렸다가 전달 받은 응답 데이터를 처리 (비동기적)
  * 비동기적으로 처리하면 웹 애플리케이션이 멈추지 않고 여러 가지 요청을 처리할 수도 있음
* 비동기적으로 처리 - setTimeout함수로 특정 작업 예약
  * 콜백 함수 사용 - 함수  자체를 함수의 인자로 전달
    * 콜백 안에 콜백을 넣어 순차적으로 처리 - "콜백 지옥"
  * Promise - 콜백 지옥 방지
    * Promise에서 resolve된 값은 .then으로 받아 올 수 있음
* async/await - 함수 앞부분에 async, 함수 내부에서 Promise 앞부분에 await
  * Promise가 끝날 때까지 기다리고 결과 값을 특정 변수에 담을 수 있음
* try / catch구문을 사용하여 에러를 처리
* axios - 자바스크립트 HTTP 클라이언트, 요청을 Promise기반으로 처리
* VS Code에서 파일 자동 불러오기 기능 - jsconfig.json파일 생성

* NewsItem - 각 뉴스 정보를 보여주는 컴포넌트
  * article이라는  객체를 props로 통째로 받아 와서 사용
* NewsList - API를 요청하고 뉴스 데이터가 들어 있는 배열을 컴포넌트 배열로 변환하여 렌더링
* 컴포넌트가 화면에 보이는 시점에 API요청, useEffect를 사용하여 처음 렌더링 되는 시점에 API요청
  * **useEffect에 등록하는 함수에 async 붙이면 안됨! (반환해야 하는 값은 뒷정리 함수)**
  * 함수 내부에 async키워드가 붙은 또 다른 함수를 만들어서 사용해야함
* map함수를 사용하여 컴포넌트 배열로 번환할때 꼭 articles를 조회하여 해당 값이 현재 null인지 검사
  * 데이터가 없을때 null에는 map 함수가 없음, 렌더링 과정에서 오류
* 컴포넌트에서 API호출처럼 Promise를 사용해야 하는 경우 더욱 간결하게 코드를 작성하게 해주는 커스텀 Hook을 만들어 사용
  * 프로젝트 다양한 곳에서 사용될 수 있는 유틸 함수들은 src/lib 디렉터리를 만든 후 안에 작성
  * usePromise를 사용하면 NewsList에서 대기 중 상태 관리와 useEffect설정을 직접 하지 않아도 되므로 코드가 간결해짐