## Exercise 19

Code Splitting

### Code Splitting

* 리액트 프로젝트 완성하여 제공시 빌드 작업
  * 빌드 - 자바스크립트 파일 안에 불필요한 주석, 경고 메시지, 공백들을 제거 하여 파일 크기 최소화
  * 코드의 트랜스파일 작업
  * 이미지 같은 정적 파일 경로 설정
* 웹팩이 담당! - 프로젝트 안에 사용중인 모든 자바스크립트 파일 / CSS 파일이 각자 하나의 파일로 합쳐짐
* CRA로 빌드경우 최소 2개 이상의 JS파일 생성, node_modules에서 불러온 파일, 일정 크기 이상의 파일, 여러파일 간에 공유된 파일 분리
  * 캐싱 효과!
* npm run-script build - build/static안에 자바스크립프 파일 생성
  * 자주 바뀌지 않는 코드들이 2로 시작하는 JS파일에 있음 - 캐싱
* Code Splitting - 파일을 분리하는 작업
  * 리액트는 불필요한 컴포넌트 코드가 한 파일에 저장되어 버림 - 로딩이 길어지고 사용자 경험도 안좋아지고 트래픽도 많이 나옴
  * 코드 비동기 로딩 - 자바스크립트 함수, 객체, 혹은 컴포넌트를 처음에 불러오지 않고 필요한 시점에 불러와서 사용
  * import를 함수로 사용하면 Promise를 반환함
  * App을 클래스형 컴포넌트로 전환하여, handleClick메서드를 만들고 SplitMe컴포넌트를 불러와 state에 넣기
  * state를 사용하여 컴포넌트 코드 스플리팅은 어렵지 않지만 매번 state를 선언해야하는 귀찮음
  * React.lazy - 코드 스플리팅 유틸함수 / Suspense - 코드 스플리팅 컴포넌트 (서버 사이드 렌더링 지원 X)
    * state를 따로 선언하지 않고 코드스플리팅
    * React.lazy - 컴포넌트를 렌더링 하는 시점에서 비동기적으로 로딩할 수 있게 해 주는 유틸 함수
    * Suspense - 리액트 내장 컴포넌트, 코드 스플리팅된 컴포넌트를 로딩하도록 발동 시킴, 로딩이 끝나지 않았을 때 보여줄 UI설정
  * Loadable Components - 서드파티 라이브러리, 서버 사이드 렌더링 지원, 렌더링 하기 전에 필요한 스플리팅된 파일을 미리 불러옴
    * 서버 사이드 렌더링 - 웹 서비스의 초기 로딩 속도 개선, 캐싱 킻 검색 엔진 최적화를 가능 하게 해줌
      * 사용시 웹 서비스의 초기 렌더링을 사용자의 브라우저가 아닌 서버 쪽에서 처리 - 로딩 속도 개선, 검색 엔진 크롤링 문제 없음
    * .preload()를 사용하여 onHover때 미리 로딩이 시작, 클릭때 렌더링 (속도 개선)

* 서버 사이드 렌더링을 하려면 Loadable Components를 사용하여 코드 스플리팅